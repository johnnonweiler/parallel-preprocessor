<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>parallel-preprocessor: Source Code Structure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">parallel-preprocessor
   &#160;<span id="projectnumber">0.3.0.3ee9e97</span>
   </div>
   <div id="projectbrief">MPI distributive and multithreading massively parallel geometry processor     for large scale CAE and machine learning, by Qingfeng Xia, UKAEA, 2019</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_wiki_CodeStructure.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Source Code Structure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This software has modular design to simplify dependency and avoid code duplication. For example, PPP module depends on C++ standard library and TBB/MPI only, all domain specific module depends on PPP and domain related third-party library. Module (C++ namespace) has the same name as the subfolder.</p>
<p>Here is description to each module with one-line description to reach header file. Note: currently the link to module folder only work in markdown format hosted in git repository.</p>
<h2><a href="./md_Base_Readme.html">Base module</a></h2>
<p>This module provides the missing type system for C++, enabling creating class instance from name.</p>
<p>This module is extracted and adapted from <a href="https://www.freecadweb.org/">FreeCAD open source project</a>, it is available as <a href="https://github.com/qingfengxia/cppBase">an external component from github</a></p><ul>
<li>Type.h: type system for C++</li>
<li>BaseClass.h: root class for type system support</li>
</ul>
<h2><a href="./index.html">PPP module: Parallel processing infrastructure</a></h2>
<p>This module consists of base classes for data pipeline, and parallel processing. It depends on only C++ standard library, TBB and some header only libraries.</p>
<h3>Infrastructure for parallel processing</h3>
<ul>
<li>Executor.h: interface and single-thread executor</li>
<li>ThreadPoolExecutor.h: multi-threading executor</li>
<li>ParallelAccessor.h: Accessor interface for parallel coupling operation</li>
<li>SparseMatrix.h: lock free concurrent container to store adjacency matrix</li>
<li>AsynchronousDispatcher.h: lock free parallel accessor, based on adjacency matrix</li>
<li>Progressor.h: report percentage of progress to console</li>
</ul>
<h3>Base classes for data pipeline</h3>
<ul>
<li>DataObject.h: abstract data container passing through pipeline</li>
<li>PipelineController.h: coordinate and execute pipeline (processors in order)</li>
<li>DataStorage.h: save result to folder, database, etc</li>
<li>ProcessorResult.h: single processor result</li>
<li>ProcessorError.h: a root exception class derived from <code>std::exception</code></li>
<li>Processor.h: json based processor meta data (readonly attribute, dependency)</li>
<li>ProcessorTemplate.h: to write a new processor without declare a new class</li>
<li>CouplingMatrixBuilder.h: calculate item pair coupling relationship for ParallelAccessor</li>
</ul>
<p><b>Planned yet completed</b></p><ul>
<li>DistributiveExecutor.h: MPI support</li>
<li>CommandLineProcessor.h: run command line for each item in a process pool</li>
</ul>
<h3>Pipeline control</h3>
<ul>
<li>Parameter.h: mapping from json config input, to control pipeline and processor behavior</li>
<li>Context.h: singleton class for pipeline control (logging, data storage, configuration)</li>
<li>OperatorProxy.h: support local console and remote operator interaction with pipeline</li>
<li>AbstractOperator.h: abstract operator interface</li>
<li>ConsoleOperator: terminal operator with console textual input and output</li>
</ul>
<h3>Utilities</h3>
<ul>
<li>TypeDefs.h: alias, typedef and enum, etc</li>
<li>Utilities.h: utility functions</li>
<li>Process.h: adapter of <code>boost:process</code> and ProcessPool</li>
<li>fs.h: adaptor of std::filesystem and boost::filesystem</li>
<li>Logger.h: thread-safe logging using <b>loguru</b> and reporting in json</li>
<li>UniqueId.h: geometry hashing algorithm</li>
</ul>
<h2><a href="md_PropertyContainer_Readme.html">PropertyContainer</a></h2>
<p>It is an independent reusable component, with test and Readme inside the module folder.</p><ul>
<li>PropertyContainer.hpp: type-safe dynamic container, base class for DataObject</li>
<li>Property.h: type-safe property based on <code>std::any</code> In the future, FreeCAD's Property framework could be used instead see FreeCAD Property <a href="https://www.freecadweb.org/wiki/Property">https://www.freecadweb.org/wiki/Property</a> <code>Enumeration, Quantity, Link, List</code>.</li>
</ul>
<h2><a href="md_Geom_Readme.html">Geom module: Geometry preprocessing</a></h2>
<p>This is an example of full-fledged module for geometry preprocessing.</p>
<p>Concrete classes to build a geometry pipeline:</p><ul>
<li>GeometryData.h: container for geometry objects, derived from <code>PPP::DataObject</code> class</li>
<li>GeometryReader.h: step, brep, FreeCAD file reading, and return GeometryData</li>
<li>GeometryWriter.h: geometry shared shape merging (after imprinting) and writing</li>
<li>GeometryPipelineController.h: extending <code>PPP::PipelineController</code></li>
<li>GeometryProcessor.h: derived from <code>PPP::Processor</code> parent for all geometry processors</li>
<li>ProcessorSample.h: geometry processor skeleton, copy it when creating a new processor</li>
<li>Goem.cpp: function implementation that should not put in headers</li>
<li>GeometryMain.cpp: executable equals to <code>geomPipeline.py config.json</code>, for debugging purpose</li>
</ul>
<p>Concrete geometry processors:</p><ul>
<li>GeometryShapeChecker.h: geometry shape error check</li>
<li>BoundBoxBuilder.h: calculate bound box for shapes</li>
<li>GeometryPropertyBuilder.h: shape meta data extraction</li>
<li>GeometryImprinter.h: boolean fragment/imprinting for large assemblies</li>
<li>CollisionDetector.h: collision detection, interference check (digital mockup)</li>
<li>GeometrySearchBuilder.h: for action search, extract one shape by boundbox, ID, shape matching, etc</li>
</ul>
<p>Some geometry processors under design and testing:</p><ul>
<li>GeometryEnclosure.h: for action fix (currently not working)</li>
<li>GeometryFixer.h: for action fix (currently not working)</li>
<li>GeometryDecomposer.h: for action decompose (currently not working)</li>
<li>GeometryFaceter.h: for action tessellation (surface meshing)</li>
</ul>
<p>Utility and types:</p><ul>
<li>GeometryTypes,h: typedef, data classes,enum, json IO support, etc</li>
<li>OccUtils.h: utility functions to deal with brep file, such as dump problematic geometry</li>
<li>OpenCascadeAll.h: contains all OpenCASCADE headers used by this module</li>
</ul>
<p>Operator interaction:</p><ul>
<li>GeometryOperatorProxy.h: implements OperatorProxy for Geom module</li>
<li>GeometryGuiMain.cpp: start a pipeline with Qt 3D viewer (not fully tested)</li>
<li>GuiOperator.h: implements AbstractOperator interface with local 3D viewer</li>
<li>WebSocketOperator.h: implements AbstractOperator interface for remote operation by websocket</li>
</ul>
<h2><a href="../python">python module</a></h2>
<ul>
<li>high-level python interface written in [pybind11]()for ppp such as <code>geomPipeline.py</code></li>
<li>utility scripts</li>
<li>python integration test</li>
<li>setup.py: python pypi package generator</li>
</ul>
<h2><a href="../test">test module</a></h2>
<ul>
<li>C++ unit tests for other modules, catch2</li>
<li>some demonstration executable written in C++</li>
</ul>
<h2><a href="../third-party">third-party</a> libraries</h2>
<p>Single header libraries are integrated directly into this PPP project,</p>
<ul>
<li>half.hpp: half precision floating point</li>
<li>json.hpp: as dump, configuration</li>
<li>mm.h: NIST matrix market read and write</li>
</ul>
<p>The other are incorporated as git submodule, see also Design.md.</p><ul>
<li><a href="https://github.com/Delgan/loguru">loguru</a>: thread-safe logging for C++</li>
<li>[catch2](): C++ unit test framework</li>
<li><a href="https://github.com/ukaea/SGeom">SGeom</a>: geometry module extracted from <a href="https://www.salome-platform.org/">Salome platform</a></li>
<li><a href="https://github.com/nushoin/RTree">RTree</a>: spatial search algorithm</li>
</ul>
<p>Some libraries not yet integrated</p><ul>
<li>zlib:</li>
<li>XML:</li>
</ul>
<hr  />
<h3><a href="../scripts">scripts: utility</a></h3>
<ul>
<li>License checker from FreeCAD project</li>
<li>python tool to add license headers to all: <a href="https://github.com/johann-petrak/licenseheaders">https://github.com/johann-petrak/licenseheaders</a></li>
</ul>
<h3><a href="../wiki">wiki: markdown document</a></h3>
<p>Hand-crafted documentation for some specific topics, in addition to doxygen generated html documentation.</p>
<h3><a href="../data">data: testing data</a></h3>
<p>Test data for each module should be organized into a specific subfolder.</p>
<h3><a href="../cMake">cMake</a></h3>
<p>Extra CMake config, mainly downloaded from open source project, see copyright/license in file headers. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
